<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Password Security Center</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    * {
      box-sizing: border-box;
    }
    
    @keyframes gridPulse {
      0%, 100% { opacity: 0.15; }
      50% { opacity: 0.15; }
    }
    
    @keyframes neonGlow {
      0%, 100% { filter: drop-shadow(0 0 2px currentColor); }
      50% { filter: drop-shadow(0 0 8px currentColor); }
    }
    
    @keyframes strengthFill {
      from { width: 0%; }
      to { width: var(--target-width); }
    }
    
    @keyframes pulseButton {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.02); }
    }
    
    .grid-background {
      background-image: 
        linear-gradient(rgba(0, 240, 255, 0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0, 240, 255, 0.03) 1px, transparent 1px);
      background-size: 40px 40px;
    }
    
    .circuit-line {
      position: absolute;
      height: 1px;
      background: linear-gradient(90deg, transparent, rgba(0, 240, 255, 0.4), transparent);
      animation: neonGlow 2s ease-in-out infinite;
    }
    
    .cyber-card {
      background: rgba(30, 40, 55, 0.98);
      border: 1px solid rgba(0, 240, 255, 0.4);
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(0, 240, 255, 0.2);
      transition: all 0.3s ease;
    }
    
    .cyber-card:hover {
      border-color: rgba(0, 240, 255, 0.5);
      box-shadow: 0 12px 48px rgba(0, 0, 0, 0.6), 0 0 25px rgba(0, 240, 255, 0.2);
    }
    
    .cyber-input {
      background: rgba(10, 15, 25, 0.6);
      border: 1px solid rgba(0, 240, 255, 0.4);
      color: #00F0FF;
      transition: all 0.3s ease;
      font-family: 'Courier New', monospace;
    }
    
    .cyber-input:focus {
      outline: none;
      border-color: #00F0FF;
      background: rgba(10, 15, 25, 0.8);
      box-shadow: 0 0 20px rgba(0, 240, 255, 0.4);
    }
    
    .cyber-button {
      background: linear-gradient(135deg, #2563EB, #00F0FF);
      border: 1px solid #00F0FF;
      box-shadow: 0 4px 15px rgba(0, 240, 255, 0.3);
      transition: all 0.3s ease;
    }
    
    .cyber-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 25px rgba(0, 240, 255, 0.5);
      animation: pulseButton 0.6s ease-in-out;
    }
    
    .cyber-button:active {
      transform: translateY(0);
    }
    
    .strength-bar {
      transition: all 0.4s ease;
      animation: strengthFill 0.4s ease-out;
    }
    
    .toggle-switch {
      width: 48px;
      height: 24px;
      background: rgba(0, 0, 0, 0.5);
      border: 1px solid rgba(0, 240, 255, 0.3);
      border-radius: 12px;
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .toggle-switch.active {
      background: linear-gradient(135deg, #2563EB, #00F0FF);
      border-color: #00F0FF;
      box-shadow: 0 0 10px rgba(0, 240, 255, 0.4);
    }
    
    .toggle-switch::after {
      content: '';
      position: absolute;
      width: 18px;
      height: 18px;
      background: #fff;
      border-radius: 50%;
      top: 2px;
      left: 2px;
      transition: all 0.3s ease;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }
    
    .toggle-switch.active::after {
      left: 26px;
    }
    
    .check-icon {
      transition: all 0.3s ease;
    }
    
    .slider-track {
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(0, 240, 255, 0.3);
      height: 4px;
    }
    
    .slider-thumb {
      background: linear-gradient(135deg, #2563EB, #00F0FF);
      border: 2px solid #00F0FF;
      box-shadow: 0 0 10px rgba(0, 240, 255, 0.5);
    }
  </style>
  <style>
  .navbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0.75rem 1.5rem;
    background: rgba(15, 20, 35, 0.9);
    border-bottom: 1px solid rgba(0, 240, 255, 0.25);
    backdrop-filter: blur(10px);
  }

  .navbar a {
    color: #00F0FF;
    text-decoration: none;
    font-weight: 500;
    margin-left: 1rem;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    transition: color 0.2s ease, text-shadow 0.2s ease;
  }

  .navbar a:hover {
    color: #2563EB;
    text-shadow: 0 0 8px rgba(0, 240, 255, 0.6);
  }

  .apps-container {
    display: flex;
    gap: 1rem;
  }
</style>

  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
 </head>
 <body class="h-full w-full overflow-auto bg-[#1a1d29] text-white font-sans">
  <div class="min-h-full w-full grid-background relative"><!-- Circuit decoration lines -->
   <div class="circuit-line" style="top: 20%; left: 0; width: 30%;"></div>
   <div class="circuit-line" style="top: 60%; right: 0; width: 25%;"></div>
   <div class="circuit-line" style="top: 80%; left: 10%; width: 40%;"></div>
   <div class="app-wrapper w-full min-h-full py-12 px-4 relative z-10">
 <!-- NAVBAR HEADER -->
<header class="relative z-20 mb-12">
  <nav class="navbar">
    <div class="navbar-left">
      <a href="http://imedrasphere.com" title="IMEDRA SPHERE Home">
        <i class="fas fa-home"></i> Home
      </a>
    </div>

    <div class="navbar-right">
      <div class="apps-container">
        <a href="https://mail.imedrasphere.com/webmail" target="_blank" title="IMEDRA Mail - Secure email service">
          <i class="fas fa-envelope"></i> Mail
        </a>
        <a href="https://docs.imedrasphere.com" target="_blank" title="IMEDRA Docs - Collaborative documents">
          <i class="fas fa-file-alt"></i> Docs
        </a>
        <a href="https://drive.imedrasphere.com" target="_blank" title="IMEDRA Drive - Cloud storage">
          <i class="fas fa-cloud"></i> Drive
        </a>
        <a href="https://school.imedrasphere.com" target="_blank" title="IMEDRA School - Educational platform">
          <i class="fas fa-graduation-cap"></i> School
        </a>
      </div>
    </div>
  </nav>
</header>

<!-- PAGE TITLE HEADER -->
<header class="text-center mb-16">
  <h1
    id="site-title"
    class="text-5xl font-bold mb-3 bg-gradient-to-r from-[#00F0FF] to-[#2563EB] bg-clip-text text-transparent"
    style="text-shadow: 0 0 30px rgba(0, 240, 255, 0.3);"
  >
    PASS.IMEDRASPHERE
  </h1>

  <p id="site-subtitle" class="text-lg text-[#00F0FF] opacity-80">
    Smooth Experience • Real-time Analysis
  </p>
</header>
     <div class="grid lg:grid-cols-2 gap-8 mb-12"><!-- Password Checker -->
      <div class="cyber-card rounded-2xl p-8">
       <h2 id="checker-title" class="text-2xl font-bold text-[#00F0FF] mb-6 flex items-center gap-3">
        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
        </svg> PASSWORD STRENGTH CHECKER</h2>
       <div class="mb-6">
        <div class="relative"><input type="password" id="password-input" placeholder="Enter password to analyze..." class="cyber-input w-full px-4 py-3 rounded-lg text-base">
        </div>
       </div><!-- Strength Meter -->
       <div class="mb-6">
        <div class="flex justify-between items-center mb-2"><span class="text-sm text-gray-100 font-medium">STRENGTH LEVEL</span> <span id="strength-text" class="text-sm font-bold text-gray-300">NOT ANALYZED</span>
        </div>
        <div class="h-3 bg-black/40 rounded-full overflow-hidden border border-[#00F0FF]/30">
         <div id="strength-bar" class="strength-bar h-full rounded-full transition-all" style="width: 0%; background: #555;"></div>
        </div>
       </div><!-- Security Checklist -->
       <div class="space-y-3">
        <div id="check-length" class="flex items-center gap-3 text-sm text-gray-100"><span class="check-icon text-xl">⚠️</span> <span>Minimum 8 characters</span>
        </div>
        <div id="check-uppercase" class="flex items-center gap-3 text-sm text-gray-100"><span class="check-icon text-xl">⚠️</span> <span>Contains uppercase letters</span>
        </div>
        <div id="check-lowercase" class="flex items-center gap-3 text-sm text-gray-100"><span class="check-icon text-xl">⚠️</span> <span>Contains lowercase letters</span>
        </div>
        <div id="check-numbers" class="flex items-center gap-3 text-sm text-gray-100"><span class="check-icon text-xl">⚠️</span> <span>Contains numbers</span>
        </div>
        <div id="check-symbols" class="flex items-center gap-3 text-sm text-gray-100"><span class="check-icon text-xl">⚠️</span> <span>Contains special symbols</span>
        </div>
       </div>
      </div><!-- Password Generator -->
      <div class="cyber-card rounded-2xl p-8">
       <h2 id="generator-title" class="text-2xl font-bold text-[#00F0FF] mb-6 flex items-center gap-3">
        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
        </svg> PASSWORD GENERATOR</h2><!-- Generated Password Display -->
       <div class="mb-6">
        <div class="cyber-input w-full px-4 py-3 rounded-lg font-mono text-lg text-center tracking-wider" id="generated-password">
         ••••••••••••
        </div>
       </div><!-- Length Slider -->
       <div class="mb-6">
        <div class="flex justify-between items-center mb-3"><label class="text-sm font-medium text-gray-100">PASSWORD LENGTH</label> <span id="length-value" class="text-[#00F0FF] font-bold text-lg">16</span>
        </div><input type="range" id="length-slider" min="8" max="32" value="16" class="w-full h-1 slider-track rounded-lg appearance-none cursor-pointer" style="background: linear-gradient(to right, #00F0FF 0%, #00F0FF 50%, rgba(0,0,0,0.4) 50%, rgba(0,0,0,0.4) 100%);">
       </div><!-- Character Options -->
       <div class="space-y-4 mb-6">
        <div class="flex items-center justify-between"><label class="text-sm text-gray-100">Uppercase (A-Z)</label>
         <div class="toggle-switch active" data-option="uppercase"></div>
        </div>
        <div class="flex items-center justify-between"><label class="text-sm text-gray-100">Lowercase (a-z)</label>
         <div class="toggle-switch active" data-option="lowercase"></div>
        </div>
        <div class="flex items-center justify-between"><label class="text-sm text-gray-100">Numbers (0-9)</label>
         <div class="toggle-switch active" data-option="numbers"></div>
        </div>
        <div class="flex items-center justify-between"><label class="text-sm text-gray-100">Symbols (!@#$%)</label>
         <div class="toggle-switch active" data-option="symbols"></div>
        </div>
        <div class="flex items-center justify-between"><label class="text-sm text-gray-100">Exclude Similar (i, l, 1, O, 0)</label>
         <div class="toggle-switch" data-option="excludeSimilar"></div>
        </div>
        <div class="flex items-center justify-between"><label class="text-sm text-gray-100">Exclude Ambiguous ({ } [ ] ( ))</label>
         <div class="toggle-switch" data-option="excludeAmbiguous"></div>
        </div>
       </div><!-- Generate Button --> <button id="generate-btn" class="cyber-button w-full py-4 rounded-lg font-bold text-black text-lg flex items-center justify-center gap-2">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path>
        </svg> GENERATE PASSWORD </button>
      </div>
     </div><!-- Footer -->
     <footer class="text-center">
      <p id="footer-text" class="text-sm text-gray-400">pass.imedrasphere.com • Secure Password Management</p>
     </footer>
    </div>
   </div>
  </div>
  <script>
    const defaultConfig = {
      site_title: 'PASS.IMEDRASPHERE',
      site_subtitle: 'Smooth User Experience • Real-time Analysis',
      checker_title: 'PASSWORD STRENGTH CHECKER',
      generator_title: 'PASSWORD GENERATOR',
      footer_text: 'pass.imedrasphere.com • Secure Password Management',
      background_color: '#1a1d29',
      accent_color: '#00F0FF',
      secondary_accent_color: '#2563EB',
      text_color: '#FFFFFF',
      card_background: 'rgba(15, 15, 18, 0.85)',
      font_family: 'system-ui, -apple-system, sans-serif',
      font_size: 16
    };
    
    let config = { ...defaultConfig };
    
    // Password Generator State
    const generatorOptions = {
      uppercase: true,
      lowercase: true,
      numbers: true,
      symbols: true,
      excludeSimilar: false,
      excludeAmbiguous: false
    };
    
    // Character sets
    const chars = {
      uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
      lowercase: 'abcdefghijklmnopqrstuvwxyz',
      numbers: '0123456789',
      symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?',
      similar: 'il1Lo0O',
      ambiguous: '{}[]()/\\\'"`~,;:.<>'
    };
    
// Password Checker
const passwordInput = document.getElementById('password-input');
const strengthBar = document.getElementById('strength-bar');
const strengthText = document.getElementById('strength-text');

// Common weak passwords and substrings (case-insensitive)
const commonPasswords = [
  'password', '123456', '123456789', 'qwerty', 'abc123', 'password123',
  'admin', 'letmein', 'welcome', 'login', 'monkey', '12345678',
  '12345', '1234567', 'sunshine', 'iloveyou', 'princess', 'master',
  'hello', 'freedom', 'whatever', 'qazwsx', 'trustno1', '000000',
  '111111', '654321', '666666', '7777777', '1q2w3e', '1qaz2wsx',
  'asdfgh', 'zxcvbn', 'azerty', 'passw0rd', 'p@ssw0rd'
];

// Keyboard-walk patterns (horizontal only; extend if needed)
const keyboardPatterns = [
  'qwerty', 'asdfgh', 'zxcvbn', '123456', '1234567890',
  'qazwsx', 'zaq12wsx', '1qaz2wsx', '1q2w3e', '1q2w3e4r',
  'azerty', 'wxcvbn', '!@#$%^', '@#$%^&'
];

passwordInput.addEventListener('input', checkPasswordStrength);

function checkPasswordStrength() {
  const password = passwordInput.value;
  if (!password) {
    resetStrengthUI('NOT ANALYZED', '#555', 0);
    return;
  }

  // Normalize for comparisons
  const lower = password.toLowerCase();

  // Basic checks
  const checks = {
    length: password.length >= 12, // stricter: ≥12 is modern baseline
    uppercase: /[A-Z]/.test(password),
    lowercase: /[a-z]/.test(password),
    numbers: /[0-9]/.test(password),
    symbols: /[!@#$%^&*()_+\-=\[\]{}|;:,.<>?~`]/.test(password)
  };

  // Update checklist UI (if you have it)
  if (typeof updateCheck === 'function') {
    updateCheck('check-length', checks.length);
    updateCheck('check-uppercase', checks.uppercase);
    updateCheck('check-lowercase', checks.lowercase);
    updateCheck('check-numbers', checks.numbers);
    updateCheck('check-symbols', checks.symbols);
  }

  // --- ADDITIONAL WEAKNESS DETECTIONS ---
  let weaknesses = [];

  // 1. Exact or substring match in common passwords (fuzzy tolerance)
  if (commonPasswords.some(p => lower.includes(p))) {
    weaknesses.push('Contains common password pattern');
  }

  // 2. Keyboard walks (fuzzy substring)
  if (keyboardPatterns.some(p => lower.includes(p))) {
    weaknesses.push('Contains keyboard walk');
  }

  // 3. Sequential digits or letters (e.g., 123, abc, 321)
  if (/(\d{3,})/.test(password)) {
    const seq = RegExp.$1;
    if (isSequential(seq) || isSequential(seq.split('').reverse().join(''))) {
      weaknesses.push('Contains sequential digits');
    }
  }

  if (/([a-z]{3,})/i.test(password)) {
    const seq = RegExp.$1.toLowerCase();
    if (isSequentialLetters(seq) || isSequentialLetters(seq.split('').reverse().join(''))) {
      weaknesses.push('Contains sequential letters');
    }
  }

  // 4. Repeated characters (e.g., aaaa, 1111, !!!, or patterns like abab)
  if (/(.)\1{3,}/.test(password)) {
    weaknesses.push('Contains repeated characters');
  }

  // 5. High similarity to username/email? (optional: add context if available)

  // --- Scoring with penalty for weaknesses ---
  let score = Object.values(checks).filter(Boolean).length;

  // Penalize: if any weakness detected, cap or reduce strength
  const hasWeakness = weaknesses.length > 0;

  let strength, color, width;

  if (hasWeakness) {
    // Force downgrade regardless of score
    if (score >= 5 && password.length >= 12) {
      strength = 'MODERATE (Weak pattern detected)';
      color = '#EAB308';
      width = 50;
    } else if (score >= 3) {
      strength = 'WEAK (Avoid predictable patterns)';
      color = '#F97316';
      width = 30;
    } else {
      strength = 'VERY WEAK (Predictable)';
      color = '#EF4444';
      width = 15;
    }
  } else {
    // Original logic, but with stricter thresholds
    if (score === 0) {
      strength = 'NOT ANALYZED';
      color = '#555';
      width = 0;
    } else if (score <= 2) {
      strength = 'VERY WEAK';
      color = '#EF4444';
      width = 20;
    } else if (score === 3) {
      strength = 'WEAK';
      color = '#F97316';
      width = 40;
    } else if (score === 4) {
      strength = 'MODERATE';
      color = '#EAB308';
      width = 60;
    } else if (score === 5 && password.length < 12) {
      strength = 'STRONG (but short)';
      color = '#2563EB';
      width = 75;
    } else if (score === 5 && password.length >= 12) {
      strength = 'VERY STRONG';
      color = '#00F0FF';
      width = 100;
    }
  }

  // Update UI
  strengthBar.style.width = width + '%';
  strengthBar.style.background = color;
  strengthBar.style.boxShadow = `0 0 10px ${color}`;
  strengthText.textContent = strength;
  strengthText.style.color = color;

  // Optional: tooltip or list of weaknesses (you can display in a <div id="weaknesses">)
  const weaknessesEl = document.getElementById('weaknesses');
  if (weaknessesEl) {
    weaknessesEl.innerHTML = weaknesses.length
      ? '<ul>' + weaknesses.map(w => `<li>${w}</li>`).join('') + '</ul>'
      : '';
  }
}

// Helper: detect sequential numeric string (e.g., "123", "5678", "4321")
function isSequential(str) {
  if (str.length < 3) return false;
  const digits = str.split('').map(c => parseInt(c, 10));
  if (digits.some(isNaN)) return false;

  // Check ascending
  let asc = true, desc = true;
  for (let i = 1; i < digits.length; i++) {
    if (digits[i] !== digits[i - 1] + 1) asc = false;
    if (digits[i] !== digits[i - 1] - 1) desc = false;
  }
  return asc || desc;
}

// Helper: detect sequential letters (e.g., 'abc', 'xyz', 'fed')
function isSequentialLetters(str) {
  if (str.length < 3) return false;
  const codes = str.split('').map(c => c.charCodeAt(0));
  let asc = true, desc = true;
  for (let i = 1; i < codes.length; i++) {
    if (codes[i] !== codes[i - 1] + 1) asc = false;
    if (codes[i] !== codes[i - 1] - 1) desc = false;
  }
  return asc || desc;
}

// Optional utility to reset UI
function resetStrengthUI(strength, color, width) {
  strengthBar.style.width = width + '%';
  strengthBar.style.background = color;
  strengthBar.style.boxShadow = width ? `0 0 10px ${color}` : 'none';
  strengthText.textContent = strength;
  strengthText.style.color = color;
}
    
    function updateCheck(id, passed) {
      const element = document.getElementById(id);
      const icon = element.querySelector('.check-icon');
      
      if (passed) {
        icon.textContent = '✅';
        element.classList.remove('text-gray-100');
        element.classList.add('text-[#00F0FF]');
      } else {
        icon.textContent = '⚠️';
        element.classList.remove('text-[#00F0FF]');
        element.classList.add('text-gray-100');
      }
    }
    
    // Password Generator
    const lengthSlider = document.getElementById('length-slider');
    const lengthValue = document.getElementById('length-value');
    const generateBtn = document.getElementById('generate-btn');
    const generatedPassword = document.getElementById('generated-password');
    
    lengthSlider.addEventListener('input', (e) => {
      lengthValue.textContent = e.target.value;
      const percent = ((e.target.value - 8) / (32 - 8)) * 100;
      e.target.style.background = `linear-gradient(to right, #00F0FF 0%, #00F0FF ${percent}%, rgba(0,0,0,0.4) ${percent}%, rgba(0,0,0,0.4) 100%)`;
    });
    
    // Toggle switches
    document.querySelectorAll('.toggle-switch').forEach(toggle => {
      toggle.addEventListener('click', () => {
        const option = toggle.dataset.option;
        generatorOptions[option] = !generatorOptions[option];
        toggle.classList.toggle('active');
      });
    });
    
    // Generate password
    generateBtn.addEventListener('click', generatePassword);
    
    function generatePassword() {
      const length = parseInt(lengthSlider.value);
      let charset = '';
      
      if (generatorOptions.uppercase) charset += chars.uppercase;
      if (generatorOptions.lowercase) charset += chars.lowercase;
      if (generatorOptions.numbers) charset += chars.numbers;
      if (generatorOptions.symbols) charset += chars.symbols;
      
      if (generatorOptions.excludeSimilar) {
        charset = charset.split('').filter(c => !chars.similar.includes(c)).join('');
      }
      
      if (generatorOptions.excludeAmbiguous) {
        charset = charset.split('').filter(c => !chars.ambiguous.includes(c)).join('');
      }
      
      if (charset.length === 0) {
        generatedPassword.textContent = 'Enable at least one option';
        return;
      }
      
      let password = '';
      for (let i = 0; i < length; i++) {
        password += charset.charAt(Math.floor(Math.random() * charset.length));
      }
      
      generatedPassword.textContent = password;
    }
    
    // Generate initial password
    generatePassword();
    
    // Element SDK Integration
    async function onConfigChange(newConfig) {
      config = { ...config, ...newConfig };
      
      const siteTitle = document.getElementById('site-title');
      const siteSubtitle = document.getElementById('site-subtitle');
      const checkerTitle = document.getElementById('checker-title');
      const generatorTitle = document.getElementById('generator-title');
      const footerText = document.getElementById('footer-text');
      
      if (siteTitle) siteTitle.textContent = config.site_title || defaultConfig.site_title;
      if (siteSubtitle) siteSubtitle.textContent = config.site_subtitle || defaultConfig.site_subtitle;
      if (checkerTitle) {
        checkerTitle.innerHTML = `
          <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
          </svg>
          ${config.checker_title || defaultConfig.checker_title}
        `;
      }
      if (generatorTitle) {
        generatorTitle.innerHTML = `
          <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path>
          </svg>
          ${config.generator_title || defaultConfig.generator_title}
        `;
      }
      if (footerText) footerText.textContent = config.footer_text || defaultConfig.footer_text;
      
      document.body.style.background = config.background_color || defaultConfig.background_color;
      
      const baseSize = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseFontStack = 'system-ui, -apple-system, sans-serif';
      
      if (siteTitle) {
        siteTitle.style.fontSize = `${baseSize * 3.125}px`;
        siteTitle.style.fontFamily = `${customFont}, ${baseFontStack}`;
      }
      if (siteSubtitle) {
        siteSubtitle.style.fontSize = `${baseSize * 1.125}px`;
        siteSubtitle.style.fontFamily = `${customFont}, ${baseFontStack}`;
      }
      if (checkerTitle) {
        checkerTitle.style.fontSize = `${baseSize * 1.5}px`;
        checkerTitle.style.fontFamily = `${customFont}, ${baseFontStack}`;
      }
      if (generatorTitle) {
        generatorTitle.style.fontSize = `${baseSize * 1.5}px`;
        generatorTitle.style.fontFamily = `${customFont}, ${baseFontStack}`;
      }
      if (footerText) {
        footerText.style.fontSize = `${baseSize * 0.875}px`;
        footerText.style.fontFamily = `${customFont}, ${baseFontStack}`;
      }
    }
    
    function mapToCapabilities(cfg) {
      return {
        recolorables: [
          {
            get: () => cfg.background_color || defaultConfig.background_color,
            set: (value) => {
              cfg.background_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ background_color: value });
              }
            }
          },
          {
            get: () => cfg.accent_color || defaultConfig.accent_color,
            set: (value) => {
              cfg.accent_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ accent_color: value });
              }
            }
          },
          {
            get: () => cfg.text_color || defaultConfig.text_color,
            set: (value) => {
              cfg.text_color = value;
              if (window.elementSdk) {
                window.elementSdk.setConfig({ text_color: value });
              }
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => cfg.font_family || defaultConfig.font_family,
          set: (value) => {
            cfg.font_family = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_family: value });
            }
          }
        },
        fontSizeable: {
          get: () => cfg.font_size || defaultConfig.font_size,
          set: (value) => {
            cfg.font_size = value;
            if (window.elementSdk) {
              window.elementSdk.setConfig({ font_size: value });
            }
          }
        }
      };
    }
    
    function mapToEditPanelValues(cfg) {
      return new Map([
        ['site_title', cfg.site_title || defaultConfig.site_title],
        ['site_subtitle', cfg.site_subtitle || defaultConfig.site_subtitle],
        ['checker_title', cfg.checker_title || defaultConfig.checker_title],
        ['generator_title', cfg.generator_title || defaultConfig.generator_title],
        ['footer_text', cfg.footer_text || defaultConfig.footer_text]
      ]);
    }
    
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9afd6a44a7667781',t:'MTc2NjA0Nzg1Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
